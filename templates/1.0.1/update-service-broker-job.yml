- name: UpdateServiceBroker
  templates:
  -  {name: update_config, release: solace-vmr}
  persistent_disk: 4096
  instances: 1
  resource_pool: common-resource-pool
  networks:
  - name: test-network
  properties:
    vmr_agent_port: 18080
    starting_port: 7000
    broker_user: 'solacedemo'
    broker_password: 'solacedemo'
    broker_hostname: 'solace-messaging.local.pcfdev.io'
    heartbeat_rate: 15000
    admin_password: 'admin'
    admin_user: 'admin'
    support_user: 'support'
    support_password: 'support'
    semp_port: 8080
    semp_ssl_port: 943
    system_domain: 'local.pcfdev.io'
    ssh_port: 2222
    {% if usingCerts %}
        {% filter indent(4, true) %}
            {% include 'cert.yml' %}
        {% endfilter %}
    {% endif %}

    {% for listName, vmrProps in vmrPropsList.items() %}
    {{ listName }}_vmr_instances: {{ vmrProps.numInstances }}
    {% endfor %}
